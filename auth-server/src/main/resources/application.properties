spring.application.name=auth-server

# Server Configuration
server.port=9000
server.servlet.context-path=/auth

# Postgres DataSource
spring.datasource.url=jdbc:postgresql://localhost:5432/oauth2_pkce
spring.datasource.username=oauth_user
spring.datasource.password=oauth_password
spring.datasource.driver-class-name=org.postgresql.Driver

# Let JPA handle everything
spring.jpa.hibernate.ddl-auto=update
spring.jpa.defer-datasource-initialization=false
spring.sql.init.mode=never
spring.jpa.open-in-view=true
spring.jpa.hibernate.show-sql=true
spring.datasource.initialize=true
spring.sql.init.data-locations=classpath:/schema.sql


# Show SQL
spring.jpa.show-sql=true

# Debug SQL initialization
logging.level.org.springframework.jdbc.datasource.init=DEBUG

# Logging
logging.level.com.oauth.pkce=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.security.oauth2=DEBUG

# JWT Key Configuration (for development)
auth.jwt.private-key=classpath:jwt-private-key.pem
auth.jwt.public-key=classpath:jwt-public-key.pem

# OAuth2 Configuration
auth.token.access-token-validity=3600
auth.token.refresh-token-validity=2592000

# OAuth2 Authorization Server Settings
spring.security.oauth2.authorizationserver.issuer=http://localhost:9000/auth
spring.security.oauth2.authorizationserver.endpoint.authorization=/oauth2/authorize
spring.security.oauth2.authorizationserver.endpoint.token=/oauth2/token
spring.security.oauth2.authorizationserver.endpoint.jwk-set=/oauth2/jwks
spring.security.oauth2.authorizationserver.endpoint.token-revocation=/oauth2/revoke
spring.security.oauth2.authorizationserver.endpoint.token-introspection=/oauth2/introspect
spring.security.oauth2.authorizationserver.endpoint.oidc.user-info=/userinfo
spring.security.oauth2.authorizationserver.endpoint.oidc.client-registration=/connect/register

## JWT Key Configuration
#spring.security.oauth2.authorizationserver.jwt.key-store-type=jks
#spring.security.oauth2.authorizationserver.jwt.key-store-path=classpath:keystore.jks
#spring.security.oauth2.authorizationserver.jwt.key-store-password=key-store-password
#spring.security.oauth2.authorizationserver.jwt.key-alias=auth-server
#spring.security.oauth2.authorizationserver.jwt.key-password=key-password

# JWK persistence
auth.jwk.location=./keystore.jwks

# Actuator
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always

spring.security.oauth2.authorizationserver.jwt.public-key-location=classpath:public-key.pem
spring.security.oauth2.authorizationserver.jwt.private-key-location=classpath:private-key.pem